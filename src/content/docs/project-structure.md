# Toronto JS Blog Project Structure

The project consists of the following list of files and folders:

<details open>
  <summary><code>/</code></summary>
  <details style="padding-inline-start: 2rem;">
    <summary><code>.astro/</code></summary>
    <p style="padding-inline-start: 1rem;">Astro's internal files, this is auto generated and should not be modified.</p>
    <p style="padding-inline-start: 1rem;">The most important files here are type definitions, generated by running the command: <code>npm run astro sync</code>.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>.github/</code></summary>
    <p style="padding-inline-start: 1rem;">GitHub configuration files, the most important files are <code>workflows/astro.yml</code> which builds the project using Github Actions and <code>dependabot.yml</code> which configures dependabot to generate alerts about outdated extensions.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>.husky/</code></summary>
    <p style="padding-inline-start: 1rem;">Husky is a tool that hooks into git and run commands before actions are made, such as commits and pushes. The files here are simple commands that run before git performs one of those actions.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>.vscode/</code></summary>
    <p style="padding-inline-start: 1rem;">Visual Studio Code configuration files, including settings, extensions, and launch settings.</p>
    <p style="padding-inline-start: 1rem;">The most important file here is <code>settings.json</code> which configures the editor settings. Most settings are for formatting, line ending and using tabs instead of spaces.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>certs/</code></summary>
    <p style="padding-inline-start: 1rem;">SSL certificates for local development. Those files should be generetad using <code>mkcert</code> following the same instructions on the <a href="setup.md">Setup page</a>.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>dist/</code></summary>
    <p style="padding-inline-start: 1rem;">The output of <code>npm run build</code>, this is the production build results.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>node_modules/</code></summary>
    <p style="padding-inline-start: 1rem;">The dependencies of the project. This is generated by <code>npm install</code>.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>public/</code></summary>
    <p style="padding-inline-start: 1rem;">Static files for the project, those are copied without any processing to the <code>dist/</code> folder and are available at the root of the site.</p>
    <p style="padding-inline-start: 1rem;">Examples of files that are in this folder are <code>favicon.ico</code> and <code>robots.txt</code>. Those have to be accessible on the built project but are not referenced anywhere in the code, so they should be put in the <code>public</code> folder.</p>
  </details>
  <details open style="padding-inline-start: 2rem;">
    <summary><code>src/</code></summary>
    <p style="padding-inline-start: 1rem;">The source code of the project.</p>
    <details open style="padding-inline-start: 2rem;">
      <summary><code>assets/</code></summary>
      <p style="padding-inline-start: 1rem;">Static assets like images, fonts, css, js, and other files that are used in the project.</p>
      <details style="padding-inline-start: 2rem;">
        <summary><code>css/</code></summary>
        <p style="padding-inline-start: 1rem;">CSS files of the project.</p>
      </details>
      <details style="padding-inline-start: 2rem;">
        <summary><code>icons/</code></summary>
        <p style="padding-inline-start: 1rem;">Custom icons that are not covered by the libraries for the <code>Icon</code> component.</p>
      </details>
      <details style="padding-inline-start: 2rem;">
        <summary><code>images/</code></summary>
        <p style="padding-inline-start: 1rem;">Images used in the project, like logos.</p>
      </details>
      <details style="padding-inline-start: 2rem;">
        <summary><code>js/</code></summary>
        <p style="padding-inline-start: 1rem;">JavaScript files that are not components, like scripts that run on the client side.</p>
      </details>
    </details>
    <details style="padding-inline-start: 2rem;">
      <summary><code>components/</code></summary>
      <p style="padding-inline-start: 1rem;">The components used for all pieces that are "more complex than an html tag". Read more about it below.</p>
    </details>
    <details style="padding-inline-start: 2rem;">
      <summary><code>content/</code></summary>
      <p style="padding-inline-start: 1rem;">This folder comes from Astro's structure, it contains all files that will be processed, like blog posts. Read more about it below.</p>
    </details>
    <details style="padding-inline-start: 2rem;">
      <summary><code>layouts/</code></summary>
      <p style="padding-inline-start: 1rem;">Resuable layouts that are used across multiple pages. Read more about it below.</p>
    </details>
    <details style="padding-inline-start: 2rem;">
      <summary><code>pages/</code></summary>
      <p style="padding-inline-start: 1rem;">Pages are the main content of the site, they are the entry points of the site. Read more about it below.</p>
    </details>
    <details style="padding-inline-start: 2rem;">
      <summary><code>schemas/</code></summary>
      <p style="padding-inline-start: 1rem;">The schema definiton for contents. Read more about it below.</p>
    </details>
    <details style="padding-inline-start: 2rem;">
      <summary><code>utils/</code></summary>
      <p style="padding-inline-start: 1rem;">Utility functions that are used across the project. this contains things like functions to sort and organize blog posts that are referenced in multiple places.</p>
    </details>
    <details style="padding-inline-start: 2rem;">
      <summary><code>env.d.ts</code></summary>
      <p style="padding-inline-start: 1rem;">Global typescript type file, used to declare global variables and other things that should be made available throughout the project.</p>
    </details>
    <details style="padding-inline-start: 2rem;">
      <summary><code>manifest.json</code></summary>
      <p style="padding-inline-start: 1rem;">Web App Manifest file, used to configure the PWA part of the project.</p>
    </details>
    <details style="padding-inline-start: 2rem;">
      <summary><code>sw-caching.ts</code></summary>
      <p style="padding-inline-start: 1rem;">Service Worker caching strategies to be used. This is what instructs the service worker on how to cache the site.</p>
    </details>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>.eslintrc</code></summary>
    <p style="padding-inline-start: 1rem;">ESLint configuration file, used to configure the linter for JavaScript and TypeScript files.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>.stylelintrc</code></summary>
    <p style="padding-inline-start: 1rem;">Stylelint configuration file, used to configure the linter for CSS files.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>.markuplintrc</code></summary>
    <p style="padding-inline-start: 1rem;">Markuplint configuration file, used to configure the linter for HTML and Astro files.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>.gitignore</code></summary>
    <p style="padding-inline-start: 1rem;">Git configuration file, used to tell git which files to ignore.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>astro.config.ts</code></summary>
    <p style="padding-inline-start: 1rem;">Astro configuration file, used to configure Astro's behavior.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>package.json</code></summary>
    <p style="padding-inline-start: 1rem;">NPM configuration file, lists out the project's dependencies and some configuration.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>package-lock.json</code></summary>
    <p style="padding-inline-start: 1rem;">NPM lock file, used to lock the versions of the dependencies.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>tsconfig.json</code></summary>
    <p style="padding-inline-start: 1rem;">TypeScript configuration file, used to configure the TypeScript compiler.</p>
  </details>
  <details style="padding-inline-start: 2rem;">
    <summary><code>README.md</code></summary>
    <p style="padding-inline-start: 1rem;">Main documentation for the project.</p>
  </details>
</details>

## Components

The components folder contains building blocks for parts that are "more complex than a single html tag". This means parts like:

- `PostCard` that is used for displaying a card with a blog post summary.
- `Avatar` to display an author's picture.
- `PostHeader` used to layout and organize the whole post header.

## Layouts

The layouts folder contain base layouts to use. This means, all the basic structure when you think something like "a page for a blog post", "a page listing blog posts", or "an internal page with content".

All layouts derive from the `Base` layout and have a similar structure:
- An html header with all the metadata for the page.
- A `<slot>` to put the header content before the `<main>` tag.
- The main content _inside_ the `<main>` tag.
- A footer with content after the `<main>` tag.

## Pages

The pages folder is how the blog is structured when you access it from a browser. That means all URLs for pages are expressed here in some way.

To make dynamic pages work, some files and folders contain square brackets in their names (e.g.: `/[year]/[month]/[slug].astro`). This is to make use of Astro's [Dynamic Routing](https://docs.astro.build/en/guides/routing/).

Basically, everything in the square brackets will be replaced and have an html file added during build time with dynamic parameters, sometimes based on collections, like the example below:

```
/[year]/[month]/[slug].astro -> /2024/01/hello-world/index.html
```

## Content and Schemas

Contents are the dynamic part that feeds and build all the blog and schemas are the validation for metadata for those collections.

It is based on Astro's [Content Collections](https://docs.astro.build/en/guides/content-collections/) and contain all the source markdown files for blog posts and authors. Those markdown files will be listed and each one of those will be used as the content to be inserted into the dynamic pages.

For example, if we have the following list of markdown files, each representing a blog post:

- `hello-world.md`, created in January 2024
- `selusa-secundus.md`, created in February 2024
- `trivial-triple-triumvirate.md`, created in March 2024 

Those files, when built, will translate to:
- `/2024/01/hello-world/index.html`
- `/2024/02/selusa-secundus/index.html`
- `/2024/03/trivial-triple-triumvirate/index.html`

## Connecting all pieces

When you have your blog post, like `hello-world.md`, it's content will be inserted into the `[slug].astro` file.

In turn, `[slug].astro` references the layout `BlogPost.astro` that is for displaying the whole content of a blog post.

Which uses components like `AuthorCard`, `PostHeader` and `TagList` as building blocks.

All together will output the built page.